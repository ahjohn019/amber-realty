import{Q as h,e as N}from"./QBtn-b8d5e40a.js";import{Q as R,a as E,b as I,d as C}from"./dayjs.min-19d0a54b.js";import{d as M,u as q,B as P,n as S,x as T,A as p,G as o,s as a,X as y,r as u,o as V,m as B,H as k,F as Y}from"./ckeditor-d241b8c8.js";import{u as H,a as j}from"./index-27c0d3c1.js";import{u as F}from"./app-5770f7e5.js";import{Q as v,d as f,c as w}from"./QMenu-b9569a53.js";import{a as O,b as U}from"./QBtnDropdown-fe7a70f8.js";import"./QSelect-aa54ccee.js";import"./use-key-composition-9d01cf96.js";import"./use-prevent-scroll-8ddeb2f2.js";import"./QLinearProgress-028ad431.js";import"./QCheckbox-dbf371a7.js";import"./use-checkbox-bafa1f8e.js";import"./option-sizes-82021515.js";const G=M("server_table_admin",{state:()=>({post_table_admin:null,router:q()}),actions:{fetchPaginationData(s,e){const{page:d,rowsPerPage:t,sortBy:l,descending:n}=s;return e={...e,attribute:l,sortable:n?"desc":"asc",page:d,paginate:t},e.paginate<=0&&(e.paginate=s.rowsNumber),e},fetchServerPagination(s,e){return{rowsNumber:s.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(s,e){return{...s,rowsPerPage:e.meta.per_page}},async fetchTableListData(s,e,d,t,l){const c=F().fetchSessionToken(),{page:r}=s??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await d[t](c,r,l)}}}),J={props:{data:Object},setup(s){const e=q();return{handleEdit:()=>{var l,n;const t=((n=(l=s.data)==null?void 0:l.row)==null?void 0:n.id)||null;e.push({name:"property.form",query:{type:"update",id:t}})}}}},K={class:"flex"},X=p("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function z(s,e,d,t,l,n){return S(),T("div",K,[p("div",null,[o(U,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:a(()=>[X]),default:a(()=>[o(O,{class:"q-table-edit-dropdown-list"},{default:a(()=>[o(v,{clickable:""},{default:a(()=>[o(f,null,{default:a(()=>[o(h,{name:"visibility"})]),_:1}),o(f,null,{default:a(()=>[o(w,null,{default:a(()=>[y("View")]),_:1})]),_:1})]),_:1}),o(v,{clickable:"",onClick:e[0]||(e[0]=c=>t.handleEdit())},{default:a(()=>[o(f,null,{default:a(()=>[o(h,{name:"edit"})]),_:1}),o(f,null,{default:a(()=>[o(w,null,{default:a(()=>[y("Edit")]),_:1})]),_:1})]),_:1}),o(v,{clickable:""},{default:a(()=>[o(f,null,{default:a(()=>[o(h,{name:"delete"})]),_:1}),o(f,null,{default:a(()=>[o(w,null,{default:a(()=>[y("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])}const W=P(J,[["render",z]]),Z={components:{TableStatus:W},setup(){const s=u(),e=u([]),d=u([]),t=u(!1),l=u({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),n=u([]),c=u({}),r=H(),x=j(),g=G(),$=i=>g.fetchPaginationData(i,c.value),L=i=>{c.value={...c.value,keyword:i,searchable:[],page:1,attribute:"name",sortable:"asc",paginate:15},Q(null,c.value)},Q=async(i,_)=>{const m=await g.fetchTableListData(i,t,r,"fetchPropertyList",_),A=m.data.map(b=>({...b,created_by:b.user.name,created_at:C(b.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=A,l.value=g.fetchServerPagination(m,i),_=g.fetchServerPayload(_,m),t.value=!1,m},D=async i=>{const _=$(i.pagination),m=x.fetchPropertyColumns();return d.value=m,Q(i.pagination,_)};return V(()=>{s.value.requestServerInteraction()}),{propertyRef:s,loading:t,pagination:l,columns:d,rows:e,onRequest:D,selected:n,fetchPagination:$,handlePostKeywords:L,getSelectedString(){return console.log(n.value),n.value.length===0?"":`${n.value.length} record${n.value.length>1?"s":""} selected of ${e.value.length}`}}}},ee={class:"q-py-md"},te=["for"],oe={class:"q-mt-md"};function ae(s,e,d,t,l,n){const c=B("TableStatus");return S(),T("div",ee,[o(I,{flat:"",ref:"propertyRef",bordered:"",grid:s.$q.screen.lt.sm,rows:t.rows,columns:t.columns,pagination:t.pagination,"onUpdate:pagination":e[0]||(e[0]=r=>t.pagination=r),selected:t.selected,"onUpdate:selected":e[1]||(e[1]=r=>t.selected=r),loading:t.loading,"binary-state-sort":"",onRequest:t.onRequest,"selected-rows-label":t.getSelectedString,selection:"multiple","row-key":"name",class:"property-table"},{"header-cell":a(r=>[o(R,{props:r},{default:a(()=>[p("label",{for:r.col.label,class:"font-bold text-sm"},k(r.col.label),9,te)]),_:2},1032,["props"])]),"body-cell-status":a(r=>[o(E,{props:r},{default:a(()=>[o(c,{data:r},null,8,["data"])]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"]),p("div",oe,"Selected: "+k(JSON.stringify(t.selected)),1)])}const se=P(Z,[["render",ae]]),ne={components:{TableList:se}},re={class:"row"},le=p("div",{class:"col text-2xl"},"Property List",-1),ce={class:"col text-right"};function de(s,e,d,t,l,n){const c=B("TableList");return S(),T(Y,null,[p("div",re,[le,p("div",ce,[o(N,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),o(c)],64)}const Te=P(ne,[["render",de]]);export{Te as default};
