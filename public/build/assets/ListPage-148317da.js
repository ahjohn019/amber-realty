import{e as L}from"./QBtn-e159bb09.js";import{Q as q,a as $,d as N}from"./dayjs.min-559b408c.js";import{d as b,u as S,a as R,B as w,r as i,o as k,n as x,x as B,G as m,s as P,A as p,H as v,m as C,F as M}from"./ckeditor-a9205207.js";import{u as Q}from"./app-8b37a9b4.js";import"./QList-dc4639b1.js";import"./QSelect-3d267ff4.js";import"./use-key-composition-64eeafd4.js";import"./QMenu-f94fd9f9.js";import"./use-prevent-scroll-f0307901.js";import"./QLinearProgress-e5c46ce9.js";import"./QCheckbox-f354e6c3.js";import"./option-sizes-47b65799.js";const Y="/api/property/",H=b("property_admin",{state:()=>({post_table_admin:null,router:S()}),actions:{async fetchPropertyList(r,e=null,n=null){const t={headers:{Authorization:`Bearer ${r}`}};try{const a="?page="+e;return(await R.get(Y+"list"+a,{params:n,...t})).data.data}catch(a){throw console.error("Error:",a),a}}}}),E=b("property_admin_models",{state:()=>({post_table_admin:null}),actions:{fetchPropertyColumns(){return[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!0},{name:"short_description",align:"left",label:"Short Description",field:"short_description",sortable:!0},{name:"price",align:"left",label:"Price",field:"price",sortable:!0},{name:"created_by",align:"left",label:"Created By",field:"created_by",sortable:!1}]}}}),F=b("server_table_admin",{state:()=>({post_table_admin:null,router:S()}),actions:{fetchPaginationData(r,e){const{page:n,rowsPerPage:t,sortBy:a,descending:s}=r;return e={...e,attribute:a,sortable:s?"desc":"asc",page:n,paginate:t},e.paginate<=0&&(e.paginate=r.rowsNumber),e},fetchServerPagination(r,e){return{rowsNumber:r.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(r,e){return{...r,rowsPerPage:e.meta.per_page}},async fetchTableListData(r,e,n,t,a){const o=Q().fetchSessionToken(),{page:g}=r??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await n[t](o,g,a)}}}),U={components:{},setup(){const r=i(),e=i([]),n=i([]),t=i(!1),a=i({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),s=i([]),o=i({}),g=H(),_=E(),u=F(),h=l=>u.fetchPaginationData(l,o.value),T=l=>{o.value={...o.value,keyword:l,searchable:[],page:1,attribute:"name",sortable:"asc",paginate:15},y(null,o.value)},y=async(l,d)=>{const c=await u.fetchTableListData(l,t,g,"fetchPropertyList",d),D=c.data.map(f=>({...f,created_by:f.user.name,created_at:N(f.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=D,a.value=u.fetchServerPagination(c,l),d=u.fetchServerPayload(d,c),t.value=!1,c},A=async l=>{const d=h(l.pagination),c=_.fetchPropertyColumns();return n.value=c,y(l.pagination,d)};return k(()=>{r.value.requestServerInteraction()}),{propertyRef:r,loading:t,pagination:a,columns:n,rows:e,onRequest:A,selected:s,fetchPagination:h,handlePostKeywords:T,getSelectedString(){return console.log(s.value),s.value.length===0?"":`${s.value.length} record${s.value.length>1?"s":""} selected of ${e.value.length}`}}}},V={class:"q-py-md"},j=["for"],z={class:"q-mt-md"};function G(r,e,n,t,a,s){return x(),B("div",V,[m($,{flat:"",ref:"propertyRef",bordered:"",grid:r.$q.screen.lt.sm,rows:t.rows,columns:t.columns,pagination:t.pagination,"onUpdate:pagination":e[0]||(e[0]=o=>t.pagination=o),selected:t.selected,"onUpdate:selected":e[1]||(e[1]=o=>t.selected=o),loading:t.loading,"binary-state-sort":"",onRequest:t.onRequest,"selected-rows-label":t.getSelectedString,selection:"multiple","row-key":"name",class:"property-table"},{"header-cell":P(o=>[m(q,{props:o},{default:P(()=>[p("label",{for:o.col.label,class:"font-bold text-sm"},v(o.col.label),9,j)]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"]),p("div",z,"Selected: "+v(JSON.stringify(t.selected)),1)])}const I=w(U,[["render",G]]),J={components:{TableList:I}},K={class:"row"},O=p("div",{class:"col text-2xl"},"Property List",-1),W={class:"col text-right"};function X(r,e,n,t,a,s){const o=C("TableList");return x(),B(M,null,[p("div",K,[O,p("div",W,[m(L,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),m(o)],64)}const pe=w(J,[["render",X]]);export{pe as default};
