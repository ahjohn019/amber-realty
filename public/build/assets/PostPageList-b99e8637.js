import{Q as Y}from"./QBtn-7730d556.js";import{Q as z,a as P,b as H,c as U}from"./QTable-9445b15f.js";import{l as I,E as J,B as q,r as p,n as $,x as A,A as o,D as e,s as t,F as r,o as j,m as D,G as h,H as G,I as O,J as W}from"./ckeditor-2db82a36.js";import{c as X,h as Z,Q as x}from"./vm-8acb4ab5.js";import{Q as i,a as d,b as c}from"./QMenu-5921cef6.js";import{Q as S,a as k}from"./QSeparator-1586664c.js";import{u as ee}from"./postTablePage-fe396b66.js";import{u as te}from"./app-45ebcf0a.js";import{Q as le}from"./QInput-92c09ed8.js";import{d as ae}from"./dayjs.min-66d8ef05.js";import"./QSelect-bed325f1.js";import"./use-key-composition-fefc29af.js";import"./QChip-5d519ab4.js";import"./QDialog-e6831ada.js";import"./use-prevent-scroll-980b8771.js";import"./use-tick-c308625a.js";import"./rtl-36dd996b.js";import"./format-7985d814.js";import"./QCheckbox-79b17ffd.js";import"./use-checkbox-5f3c2cd8.js";import"./option-sizes-38d363f3.js";const oe=["top","middle","bottom"],V=X({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:l=>oe.includes(l)}},setup(l,{slots:n}){const _=I(()=>l.align!==void 0?{verticalAlign:l.align}:null),s=I(()=>{const f=l.outline===!0&&l.color||l.textColor;return`q-badge flex inline items-center no-wrap q-badge--${l.multiLine===!0?"multi":"single"}-line`+(l.outline===!0?" q-badge--outline":l.color!==void 0?` bg-${l.color}`:"")+(f!==void 0?` text-${f}`:"")+(l.floating===!0?" q-badge--floating":"")+(l.rounded===!0?" q-badge--rounded":"")+(l.transparent===!0?" q-badge--transparent":"")});return()=>J("div",{class:s.value,style:_.value,role:"status","aria-label":l.label},Z(n.default,l.label!==void 0?[l.label]:[]))}});const se={setup(l,{emit:n}){const _=p("");return{handlePostSearch:()=>{n("postKeywords",_.value)},postKeywords:_}}},ne={class:"row p-2 bg-white mt-5"},de={class:"col col-md-6 col-lg-9 filter-posts-search-bar"},re={class:"col col-md-2 col-lg-1 text-center"},ie={class:"col col-md-2 col-lg-1 text-center"},ce={class:"col col-md-2 col-lg-1 text-center"};function ue(l,n,_,s,f,g){return $(),A("div",ne,[o("div",de,[e(le,{outlined:"",dense:"",label:"Search",modelValue:s.postKeywords,"onUpdate:modelValue":n[0]||(n[0]=u=>s.postKeywords=u)},{append:t(()=>[e(x,{name:"search",onClick:s.handlePostSearch},null,8,["onClick"])]),_:1},8,["modelValue"])]),o("div",re,[e(k,{label:"Filters",class:"filter-posts-bar","dropdown-icon":"expand_more"},{default:t(()=>[e(S,null,{default:t(()=>[e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Photos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Videos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Articles")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",ie,[e(k,{class:"filter-posts-bar","dropdown-icon":"expand_more",label:"Category"},{default:t(()=>[e(S,null,{default:t(()=>[e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Photos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Videos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Articles")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",ce,[e(k,{class:"filter-posts-bar","dropdown-icon":"expand_more",label:"Latest"},{default:t(()=>[e(S,null,{default:t(()=>[e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Photos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Videos")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Articles")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])}const _e=q(se,[["render",ue]]);const fe={components:{FilterBar:_e},setup(){const l=p(),n=p([]),_=p([]),s=p(""),f=p(!1),g=p({sortBy:"title",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),u=p([]),a=p({}),B=ee(),K=te().fetchSessionToken(),C=m=>{const{page:b,rowsPerPage:v,sortBy:w,descending:Q}=m;return a.value={...a.value,attribute:w,sortable:Q?"desc":"asc",page:b,paginate:v},a.value.paginate<=0&&(a.value.paginate=m.rowsNumber),a.value},N=m=>{a.value={...a.value,keyword:m,searchable:["title","content"],page:1,attribute:"title",sortable:"asc",paginate:15},L(null,a.value)},L=async(m,b)=>{const{page:v,rowsPerPage:w,sortBy:Q,descending:E}=m??{page:1,rowsPerPage:15,sortBy:null,descending:null};f.value=!0;const y=await B.fetchPostList(K,v,b),M=y.data.map(T=>({...T,created_at:ae(T.created_at).format("YYYY-MM-DD HH:mm:ss")}));return n.value=M,g.value={...g.value,rowsNumber:y.meta.total,page:v,rowsPerPage:w,sortBy:Q,descending:E},b.rowsPerPage=y.meta.per_page,f.value=!1,y},R=async m=>{const b=C(m.pagination),v=B.fetchPostColumns();return _.value=v,L(m.pagination,b)};return j(()=>{l.value.requestServerInteraction()}),{tableRef:l,filter:s,loading:f,pagination:g,columns:_,rows:n,onRequest:R,selected:u,fetchPagination:C,handlePostKeywords:N,getSelectedString(){return console.log(u.value),u.value.length===0?"":`${u.value.length} record${u.value.length>1?"s":""} selected of ${n.value.length}`}}}},F=l=>(O("data-v-a8230244"),l=l(),W(),l),me={class:"pt-5"},pe=["for"],ge={class:"font-bold table-likes-columns"},be={class:"q-table-label"},ve={class:"flex gap-2"},he=F(()=>o("div",null,[o("span",{class:"q-table-label"},"Score ")],-1)),we={class:"flex"},ye=F(()=>o("div",{class:"row items-center no-wrap font-bold"}," Edit ",-1)),Pe={class:"q-mt-md"};function xe(l,n,_,s,f,g){const u=D("FilterBar");return $(),A(G,null,[e(u,{onPostKeywords:s.handlePostKeywords},null,8,["onPostKeywords"]),o("div",me,[e(U,{flat:"",ref:"tableRef",bordered:"",grid:l.$q.screen.lt.sm,rows:s.rows,columns:s.columns,pagination:s.pagination,"onUpdate:pagination":n[0]||(n[0]=a=>s.pagination=a),selected:s.selected,"onUpdate:selected":n[1]||(n[1]=a=>s.selected=a),loading:s.loading,"binary-state-sort":"",onRequest:s.onRequest,"selected-rows-label":s.getSelectedString,selection:"multiple",class:"posts-table"},{"header-cell":t(a=>[e(z,{props:a},{default:t(()=>[o("label",{for:a.col.label,class:"font-bold text-sm"},h(a.col.label),9,pe)]),_:2},1032,["props"])]),"body-cell":t(a=>[e(P,{props:a,class:"font-bold"},{default:t(()=>[o("div",null,h(a.value),1)]),_:2},1032,["props"])]),"body-cell-title":t(a=>[e(P,{props:a},{default:t(()=>[o("div",ge,h(a.value),1),o("div",be," Likes : "+h(a.row.likes),1)]),_:2},1032,["props"])]),"body-cell-popularity":t(a=>[e(P,{props:a},{default:t(()=>[o("div",ve,[he,o("div",null,[e(V,{color:"positive",style:{"font-weight":"bold"},class:"capitalize p-2 rounded",label:a.row.popularity_percentage+"%"},null,8,["label"])]),o("div",null,[e(V,{color:"positive",style:{"font-weight":"bold"},class:"capitalize p-2 rounded",label:a.row.popularity_grade},null,8,["label"])])]),o("div",null,[e(H,{rounded:"",size:"15px",value:parseFloat(a.value),class:"q-mt-sm rounded q-table-custom-progress-bar"},null,8,["value"])])]),_:2},1032,["props"])]),"body-cell-status":t(a=>[e(P,{props:a},{default:t(()=>[o("div",we,[o("div",null,[e(k,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:t(()=>[ye]),default:t(()=>[e(S,{class:"q-table-edit-dropdown-list"},{default:t(()=>[e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(x,{name:"visibility"})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("View")]),_:1})]),_:1})]),_:1}),e(i,{clickable:""},{default:t(()=>[e(d,null,{default:t(()=>[e(x,{name:"edit"})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Edit")]),_:1})]),_:1})]),_:1}),e(i,{clickable:"",onClick:B=>l.handlePostDelete(a.row.id)},{default:t(()=>[e(d,null,{default:t(()=>[e(x,{name:"delete"})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Delete")]),_:1})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])])]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"]),o("div",Pe,"Selected: "+h(JSON.stringify(s.selected)),1)])],64)}const Se=q(fe,[["render",xe],["__scopeId","data-v-a8230244"]]);const ke={components:{TablePage:Se}},Be={class:"dashboard-container-page m-4 px-4"},Qe={class:"row"},qe=o("div",{class:"col text-2xl"},"Post List",-1),$e={class:"col text-right"};function Ae(l,n,_,s,f,g){const u=D("TablePage");return $(),A("div",Be,[o("div",Qe,[qe,o("div",$e,[e(Y,{"icon-right":"add",label:"Add Posts",class:"add-posts text-white",color:"primary",to:{name:"posts.form",query:{type:"create"}}},null,8,["to"])])]),e(u)])}const Ze=q(ke,[["render",Ae]]);export{Ze as default};
