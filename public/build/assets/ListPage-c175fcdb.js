import{Q as P}from"./QBtn-7730d556.js";import{Q as M,a as I,c as N}from"./QTable-9445b15f.js";import{d as z,u as Y,B as k,r as u,n as g,x as S,D as t,s as n,H as q,a5 as H,q as U,F as b,G as D,A as y,a7 as j,a9 as F,o as G,m as x}from"./ckeditor-2db82a36.js";import{u as $,a as K}from"./index-21c0d77a.js";import{u as A}from"./app-671744c6.js";import{Q as O}from"./QCheckbox-79b17ffd.js";import{Q as J}from"./QCardSection-179f6214.js";import{Q as B,b as W,a as X}from"./QSeparator-1586664c.js";import{Q as w,a as p,b as h}from"./QMenu-5921cef6.js";import{Q as Z}from"./QCard-e317547d.js";import{Q}from"./vm-8acb4ab5.js";import{d as ee}from"./dayjs.min-66d8ef05.js";import"./QSelect-bed325f1.js";import"./use-key-composition-fefc29af.js";import"./QChip-5d519ab4.js";import"./QDialog-e6831ada.js";import"./use-prevent-scroll-980b8771.js";import"./use-tick-c308625a.js";import"./rtl-36dd996b.js";import"./format-7985d814.js";import"./use-checkbox-5f3c2cd8.js";import"./option-sizes-38d363f3.js";const te=z("server_table_admin",{state:()=>({post_table_admin:null,router:Y()}),actions:{fetchPaginationData(l,e){const{page:i,rowsPerPage:o,sortBy:d,descending:r}=l;return e={...e,attribute:d,sortable:r?"desc":"asc",page:i,paginate:o},e.paginate<=0&&(e.paginate=l.rowsNumber),e},fetchServerPagination(l,e){return{rowsNumber:l.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(l,e){return{...l,rowsPerPage:e.meta.per_page}},async fetchTableListData(l,e,i,o,d){const a=A().fetchSessionToken(),{page:m}=l??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await i[o](a,m,d)}}});const oe={props:["props"],setup(l){var f;const e=$(),o=A().fetchSessionToken(),d=((f=l.props.row)==null?void 0:f.id)||null,r=u([]);return{handleView:()=>{e.handleViewProperty(d,l.props)},handleEdit:()=>{e.handleEditProperty(d)},handleDelete:async()=>{await e.handleDeleteProperty(d,o)},selected:r,getSelectedString(){return console.log(r.value),r.value.length===0?"":`${r.value.length} record${r.value.length>1?"s":""}`}}}},ne={class:"q-gutter-md"};function ae(l,e,i,o,d,r){return g(),S("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:F(i.props.selected?"transform: scale(0.95);":"")},[t(Z,{bordered:"",flat:"",class:j(i.props.selected?l.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:n(()=>[t(B,null,{default:n(()=>[t(J,null,{default:n(()=>[t(O,{dense:"",modelValue:i.props.selected,"onUpdate:modelValue":e[0]||(e[0]=a=>i.props.selected=a),label:i.props.row.name},null,8,["modelValue","label"])]),_:1}),t(W),(g(!0),S(q,null,H(i.props.cols.filter(a=>a.name!=="action"),a=>(g(),U(w,{key:a.name},{default:n(()=>[t(p,null,{default:n(()=>[t(h,null,{default:n(()=>[b(D(a.label),1)]),_:2},1024),t(h,{caption:""},{default:n(()=>[b(D(a.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(w,null,{default:n(()=>[t(p,null,{default:n(()=>[t(h,null,{default:n(()=>[b("Action")]),_:1}),y("div",ne,[t(P,{color:"primary",icon:"visibility",label:"View",size:"sm",onClick:e[1]||(e[1]=a=>o.handleView())}),t(P,{color:"secondary",icon:"edit",label:"Edit",size:"sm",onClick:e[2]||(e[2]=a=>o.handleEdit())}),t(P,{color:"red",icon:"delete",label:"Delete",size:"sm",onClick:e[3]||(e[3]=a=>o.handleDelete())})])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],4)}const le=k(oe,[["render",ae]]),re={props:{data:Object},setup(l){var s;const e=$(),o=A().fetchSessionToken(),d=((s=l.data.row)==null?void 0:s.id)||null;return{handleEdit:()=>{e.handleEditProperty(d,l)},handleDelete:async()=>{await e.handleDeleteProperty(d,o)},handleView:()=>{e.handleViewProperty(d,l)}}}},se=y("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function ie(l,e,i,o,d,r){return g(),S("div",null,[t(X,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:n(()=>[se]),default:n(()=>[t(B,{class:"q-table-edit-dropdown-list"},{default:n(()=>[t(w,{clickable:"",onClick:e[0]||(e[0]=a=>o.handleView())},{default:n(()=>[t(p,null,{default:n(()=>[t(Q,{name:"visibility"})]),_:1}),t(p,null,{default:n(()=>[t(h,null,{default:n(()=>[b("View")]),_:1})]),_:1})]),_:1}),t(w,{clickable:"",onClick:e[1]||(e[1]=a=>o.handleEdit())},{default:n(()=>[t(p,null,{default:n(()=>[t(Q,{name:"edit"})]),_:1}),t(p,null,{default:n(()=>[t(h,null,{default:n(()=>[b("Edit")]),_:1})]),_:1})]),_:1}),t(w,{clickable:"",onClick:e[2]||(e[2]=a=>o.handleDelete())},{default:n(()=>[t(p,null,{default:n(()=>[t(Q,{name:"delete"})]),_:1}),t(p,null,{default:n(()=>[t(h,null,{default:n(()=>[b("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const de=k(re,[["render",ie]]),ce={components:{TableStatus:de,TableMobileResponsive:le},setup(){const l=u(),e=u([]),i=u([]),o=u(!1),d=u({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),r=u([]),a=u({}),m=$(),s=K(),f=te(),V=c=>f.fetchPaginationData(c,a.value),E=c=>{a.value={...a.value,keyword:c,searchable:[],page:1,attribute:"name",sortable:"asc",paginate:15},C(null,a.value)},C=async(c,v)=>{const _=await f.fetchTableListData(c,o,m,"fetchPropertyList",v),R=_.data.map(T=>({...T,created_by:T.user.name,created_at:ee(T.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=R,d.value=f.fetchServerPagination(_,c),v=f.fetchServerPayload(v,_),o.value=!1,_},L=async c=>{const v=V(c.pagination),_=s.fetchPropertyColumns();return i.value=_,C(c.pagination,v)};return G(()=>{l.value.requestServerInteraction()}),{propertyRef:l,loading:o,pagination:d,columns:i,rows:e,onRequest:L,selected:r,fetchPagination:V,handlePostKeywords:E,getSelectedString(){return console.log(r.value),r.value.length===0?"":`${r.value.length} record${r.value.length>1?"s":""} selected of ${e.value.length}`}}}},ue={class:"q-py-md"},pe=["for"];function me(l,e,i,o,d,r){const a=x("TableStatus"),m=x("TableMobileResponsive");return g(),S("div",ue,[t(N,{flat:"",ref:"propertyRef",bordered:"",grid:l.$q.screen.lt.md,rows:o.rows,columns:o.columns,pagination:o.pagination,"onUpdate:pagination":e[0]||(e[0]=s=>o.pagination=s),selected:o.selected,"onUpdate:selected":e[1]||(e[1]=s=>o.selected=s),loading:o.loading,"binary-state-sort":"",onRequest:o.onRequest,"selected-rows-label":o.getSelectedString,selection:"multiple","row-key":"name",class:"property-table","wrap-cells":""},{"header-cell":n(s=>[t(M,{props:s},{default:n(()=>[y("label",{for:s.col.label,class:"font-bold text-sm"},D(s.col.label),9,pe)]),_:2},1032,["props"])]),"body-cell-action":n(s=>[t(I,{props:s},{default:n(()=>[t(a,{data:s},null,8,["data"])]),_:2},1032,["props"])]),item:n(s=>[t(m,{props:s},null,8,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"])])}const fe=k(ce,[["render",me]]),_e={components:{TableList:fe}},ge={class:"row"},be=y("div",{class:"col text-2xl"},"Property List",-1),he={class:"col text-right"};function ye(l,e,i,o,d,r){const a=x("TableList");return g(),S(q,null,[y("div",ge,[be,y("div",he,[t(P,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),t(a)],64)}const Ye=k(_e,[["render",ye]]);export{Ye as default};
