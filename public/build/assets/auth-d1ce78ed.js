import{L as a,M as i,e as r}from"./ckeditor-f00ee2ff.js";import{S as n}from"./sweetalert2.all-0da9c671.js";const s="/api/auth/",u=a("auth_admin",{state:()=>({admin:null,config:{headers:{Authorization:""}},router:i()}),actions:{async fetchProfile(o){this.config.headers.Authorization=`Bearer ${o}`;try{return(await r.post(s+"profile",null,this.config)).data.data}catch(e){throw console.error("Error:",e),e}},async handleLogin(o){try{return await r.post(s+"login",o).then(t=>{window.sessionStorage.setItem("_token",t.data.data.token),this.router.push("/")}).catch(t=>{n.fire({text:t.response.data.message,icon:"error"})})}catch(e){throw console.error("Error:",e),e}},async handleLogout(o){this.config.headers.Authorization=`Bearer ${o}`;try{return await r.post(s+"logout",null,this.config).then(t=>{n.fire({text:t.data.message,icon:"success"}),window.sessionStorage.removeItem("_token"),this.router.push("/login")})}catch(e){throw console.error("Error:",e),e}},fetchSessionToken(){return window.sessionStorage.getItem("_token")}}});export{u};
