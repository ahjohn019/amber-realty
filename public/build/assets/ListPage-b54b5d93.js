import{e as P,Q as D}from"./focus-manager-e961f08d.js";import{Q as V,a as I,b as N,d as z}from"./dayjs.min-079868cc.js";import{d as Y,u as H,B as T,r as p,n as _,x as S,G as t,s as o,F as B,D as U,q as j,X as g,H as Q,A as h,W as F,E as G,o as K,m as x}from"./ckeditor-6cef9db6.js";import{u as $,a as O}from"./index-92b79ad9.js";import{u as A}from"./app-e9cd145d.js";import{Q as W}from"./QCheckbox-ca18c314.js";import{Q as X,a as J}from"./QCard-f17d455d.js";import{a as C,Q as Z,b as ee}from"./QBtnDropdown-f0635edb.js";import{Q as v,d as m,c as b}from"./QMenu-b4177ad7.js";import"./QSelect-fba9c23d.js";import"./option-sizes-10c17a4a.js";import"./use-prevent-scroll-3edaeb3c.js";import"./QLinearProgress-79b1f5af.js";import"./use-checkbox-557c6555.js";const te=Y("server_table_admin",{state:()=>({post_table_admin:null,router:H()}),actions:{fetchPaginationData(l,e){const{page:r,rowsPerPage:a,sortBy:i,descending:s}=l;return e={...e,attribute:i,sortable:s?"desc":"asc",page:r,paginate:a},e.paginate<=0&&(e.paginate=l.rowsNumber),e},fetchServerPagination(l,e){return{rowsNumber:l.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(l,e){return{...l,rowsPerPage:e.meta.per_page}},async fetchTableListData(l,e,r,a,i){const n=A().fetchSessionToken(),{page:c}=l??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await r[a](n,c,i)}}});const oe={props:["props"],setup(l){var d;const e=$(),a=A().fetchSessionToken(),i=((d=l.props.row)==null?void 0:d.id)||null,s=p([]);return{handleEdit:()=>{e.handleEditProperty(i)},handleDelete:async()=>{await e.handleDeleteProperty(i,a)},selected:s,getSelectedString(){return console.log(s.value),s.value.length===0?"":`${s.value.length} record${s.value.length>1?"s":""}`}}}},ae={class:"q-gutter-md"};function ne(l,e,r,a,i,s){return _(),S("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:G(r.props.selected?"transform: scale(0.95);":"")},[t(J,{bordered:"",flat:"",class:F(r.props.selected?l.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:o(()=>[t(C,null,{default:o(()=>[t(X,null,{default:o(()=>[t(W,{dense:"",modelValue:r.props.selected,"onUpdate:modelValue":e[0]||(e[0]=n=>r.props.selected=n),label:r.props.row.name},null,8,["modelValue","label"])]),_:1}),t(Z),(_(!0),S(B,null,U(r.props.cols.filter(n=>n.name!=="status"),n=>(_(),j(v,{key:n.name},{default:o(()=>[t(m,null,{default:o(()=>[t(b,null,{default:o(()=>[g(Q(n.label),1)]),_:2},1024),t(b,{caption:""},{default:o(()=>[g(Q(n.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(v,null,{default:o(()=>[t(m,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Status")]),_:1}),h("div",ae,[t(P,{color:"primary",icon:"visibility",label:"View",size:"sm"}),t(P,{color:"secondary",icon:"edit",label:"Edit",size:"sm",onClick:e[1]||(e[1]=n=>a.handleEdit())}),t(P,{color:"red",icon:"delete",label:"Delete",size:"sm",onClick:e[2]||(e[2]=n=>a.handleDelete())})])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],4)}const le=T(oe,[["render",ne]]),se={props:{data:Object},setup(l){var c;const e=$(),a=A().fetchSessionToken(),i=((c=l.data.row)==null?void 0:c.id)||null;return{handleEdit:()=>{e.handleEditProperty(i,l)},handleDelete:async()=>{await e.handleDeleteProperty(i,a)}}}},re=h("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function de(l,e,r,a,i,s){return _(),S("div",null,[t(ee,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:o(()=>[re]),default:o(()=>[t(C,{class:"q-table-edit-dropdown-list"},{default:o(()=>[t(v,{clickable:""},{default:o(()=>[t(m,null,{default:o(()=>[t(D,{name:"visibility"})]),_:1}),t(m,null,{default:o(()=>[t(b,null,{default:o(()=>[g("View")]),_:1})]),_:1})]),_:1}),t(v,{clickable:"",onClick:e[0]||(e[0]=n=>a.handleEdit())},{default:o(()=>[t(m,null,{default:o(()=>[t(D,{name:"edit"})]),_:1}),t(m,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Edit")]),_:1})]),_:1})]),_:1}),t(v,{clickable:"",onClick:e[1]||(e[1]=n=>a.handleDelete())},{default:o(()=>[t(m,null,{default:o(()=>[t(D,{name:"delete"})]),_:1}),t(m,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const ie=T(se,[["render",de]]),ce={components:{TableStatus:ie,TableMobileResponsive:le},setup(){const l=p(),e=p([]),r=p([]),a=p(!1),i=p({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),s=p([]),n=p({}),c=$(),d=O(),w=te(),q=u=>w.fetchPaginationData(u,n.value),L=u=>{n.value={...n.value,keyword:u,searchable:[],page:1,attribute:"name",sortable:"asc",paginate:15},E(null,n.value)},E=async(u,y)=>{const f=await w.fetchTableListData(u,a,c,"fetchPropertyList",y),M=f.data.map(k=>({...k,created_by:k.user.name,created_at:z(k.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=M,i.value=w.fetchServerPagination(f,u),y=w.fetchServerPayload(y,f),a.value=!1,f},R=async u=>{const y=q(u.pagination),f=d.fetchPropertyColumns();return r.value=f,E(u.pagination,y)};return K(()=>{l.value.requestServerInteraction()}),{propertyRef:l,loading:a,pagination:i,columns:r,rows:e,onRequest:R,selected:s,fetchPagination:q,handlePostKeywords:L,getSelectedString(){return console.log(s.value),s.value.length===0?"":`${s.value.length} record${s.value.length>1?"s":""} selected of ${e.value.length}`}}}},ue={class:"q-py-md"},pe=["for"];function me(l,e,r,a,i,s){const n=x("TableStatus"),c=x("TableMobileResponsive");return _(),S("div",ue,[t(N,{flat:"",ref:"propertyRef",bordered:"",grid:l.$q.screen.lt.sm,rows:a.rows,columns:a.columns,pagination:a.pagination,"onUpdate:pagination":e[0]||(e[0]=d=>a.pagination=d),selected:a.selected,"onUpdate:selected":e[1]||(e[1]=d=>a.selected=d),loading:a.loading,"binary-state-sort":"",onRequest:a.onRequest,"selected-rows-label":a.getSelectedString,selection:"multiple","row-key":"name",class:"property-table"},{"header-cell":o(d=>[t(V,{props:d},{default:o(()=>[h("label",{for:d.col.label,class:"font-bold text-sm"},Q(d.col.label),9,pe)]),_:2},1032,["props"])]),"body-cell-status":o(d=>[t(I,{props:d},{default:o(()=>[t(n,{data:d},null,8,["data"])]),_:2},1032,["props"])]),item:o(d=>[t(c,{props:d},null,8,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"])])}const fe=T(ce,[["render",me]]),_e={components:{TableList:fe}},ge={class:"row"},be=h("div",{class:"col text-2xl"},"Property List",-1),he={class:"col text-right"};function ye(l,e,r,a,i,s){const n=x("TableList");return _(),S(B,null,[h("div",ge,[be,h("div",he,[t(P,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),t(n)],64)}const Ce=T(_e,[["render",ye]]);export{Ce as default};
