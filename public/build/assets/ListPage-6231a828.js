import{Q as T}from"./QBtn-f04e0e0c.js";import{Q as v}from"./vm-bbb8e40e.js";import{Q as H}from"./QInput-f7a2bc74.js";import{Q as N,a as q,c as z}from"./QTable-5b10b1da.js";import{d as U,u as Y,B as Q,r as u,n as p,x as b,D as t,s as n,H as B,T as j,q as E,F as w,G as D,A as y,W as F,Y as G,o as O,m as V,Z as W,U as Z}from"./ckeditor-fbb897ca.js";import{u as A,a as J}from"./index-e5320b87.js";import{u as C}from"./app-3bcaf3ac.js";import{Q as X}from"./QCheckbox-3a5452c5.js";import{Q as ee}from"./QCardSection-3d6490d7.js";import{Q as K,b as te,a as oe}from"./QSeparator-1edaee61.js";import{Q as S,a as m,b as h}from"./QMenu-28ee5d15.js";import{Q as ne}from"./QCard-5f529700.js";import{d as re}from"./dayjs.min-d9fb95f9.js";import"./QSelect-18a9aa9d.js";import"./QChip-98d3f8a9.js";import"./QDialog-f560fde2.js";import"./use-prevent-scroll-9b8a751e.js";import"./use-tick-27af0da6.js";import"./rtl-36dd996b.js";import"./format-7985d814.js";import"./use-checkbox-eac31a74.js";import"./option-sizes-51933346.js";const le=U("server_table_admin",{state:()=>({post_table_admin:null,router:Y()}),actions:{fetchPaginationData(a,e){const{page:s,rowsPerPage:o,sortBy:d,descending:i}=a;return e={...e,attribute:d,sortable:i?"desc":"asc",page:s,paginate:o},e.paginate<=0&&(e.paginate=a.rowsNumber),e},fetchServerPagination(a,e){return{rowsNumber:a.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(a,e){return{...a,rowsPerPage:e.meta.per_page}},async fetchTableListData(a,e,s,o,d){const r=C().fetchSessionToken(),{page:f}=a??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await s[o](r,f,d)}}});const ae={props:["props"],setup(a){var P;const e=A(),o=C().fetchSessionToken(),d=((P=a.props.row)==null?void 0:P.id)||null,i=u([]);return{handleView:()=>{e.handleViewProperty(d,a.props)},handleEdit:()=>{e.handleEditProperty(d)},handleDelete:async()=>{await e.handleDeleteProperty(d,o)},selected:i,getSelectedString(){return console.log(i.value),i.value.length===0?"":`${i.value.length} record${i.value.length>1?"s":""}`}}}},se=["innerHTML"],de={key:1},ie={class:"q-gutter-md"};function ce(a,e,s,o,d,i){return p(),b("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:G(s.props.selected?"transform: scale(0.95);":"")},[t(ne,{bordered:"",flat:"",class:F(s.props.selected?a.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:n(()=>[t(K,null,{default:n(()=>[t(ee,null,{default:n(()=>[t(X,{dense:"",modelValue:s.props.selected,"onUpdate:modelValue":e[0]||(e[0]=r=>s.props.selected=r),label:s.props.row.name},null,8,["modelValue","label"])]),_:1}),t(te),(p(!0),b(B,null,j(s.props.cols.filter(r=>r.name!=="action"),r=>(p(),E(S,{key:r.name},{default:n(()=>[t(m,null,{default:n(()=>[t(h,null,{default:n(()=>[w(D(r.label),1)]),_:2},1024),t(h,{caption:""},{default:n(()=>[r.name=="short_description"?(p(),b("div",{key:0,innerHTML:r.value,class:"break-all"},null,8,se)):(p(),b("div",de,D(r.value),1))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(S,null,{default:n(()=>[t(m,null,{default:n(()=>[t(h,null,{default:n(()=>[w("Action")]),_:1}),y("div",ie,[t(T,{color:"primary",icon:"visibility",label:"View",size:"sm",onClick:e[1]||(e[1]=r=>o.handleView())}),t(T,{color:"secondary",icon:"edit",label:"Edit",size:"sm",onClick:e[2]||(e[2]=r=>o.handleEdit())}),t(T,{color:"red",icon:"delete",label:"Delete",size:"sm",onClick:e[3]||(e[3]=r=>o.handleDelete())})])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],4)}const ue=Q(ae,[["render",ce]]),pe={props:{data:Object},setup(a){var l;const e=A(),o=C().fetchSessionToken(),d=((l=a.data.row)==null?void 0:l.id)||null;return{handleEdit:()=>{e.handleEditProperty(d,a)},handleDelete:async()=>{await e.handleDeleteProperty(d,o)},handleView:()=>{e.handleViewProperty(d,a)}}}},me=y("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function fe(a,e,s,o,d,i){return p(),b("div",null,[t(oe,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:n(()=>[me]),default:n(()=>[t(K,{class:"q-table-edit-dropdown-list"},{default:n(()=>[t(S,{clickable:"",onClick:e[0]||(e[0]=r=>o.handleView())},{default:n(()=>[t(m,null,{default:n(()=>[t(v,{name:"visibility"})]),_:1}),t(m,null,{default:n(()=>[t(h,null,{default:n(()=>[w("View")]),_:1})]),_:1})]),_:1}),t(S,{clickable:"",onClick:e[1]||(e[1]=r=>o.handleEdit())},{default:n(()=>[t(m,null,{default:n(()=>[t(v,{name:"edit"})]),_:1}),t(m,null,{default:n(()=>[t(h,null,{default:n(()=>[w("Edit")]),_:1})]),_:1})]),_:1}),t(S,{clickable:"",onClick:e[2]||(e[2]=r=>o.handleDelete())},{default:n(()=>[t(m,null,{default:n(()=>[t(v,{name:"delete"})]),_:1}),t(m,null,{default:n(()=>[t(h,null,{default:n(()=>[w("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const be=Q(pe,[["render",fe]]),ye={components:{TableStatus:be,TableMobileResponsive:ue},setup(){const a=u(),e=u([]),s=u([]),o=u(!1),d=u({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),i=u([]),r=u({}),f=u(""),l=A(),P=J(),k=le(),L=c=>k.fetchPaginationData(c,r.value),M=c=>{r.value={...r.value,keyword:c,searchable:["name","short_description","price","listing_type"],page:1,attribute:"name",sortable:"asc",paginate:15},$(null,r.value)},$=async(c,g)=>{const _=await k.fetchTableListData(c,o,l,"fetchPropertyList",g),I=_.data.map(x=>({...x,created_by:x.user.name,created_at:re(x.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=I,c!=null&&(d.value=k.fetchServerPagination(_,c)),g=k.fetchServerPayload(g,_),o.value=!1,_},R=async c=>{const g=L(c.pagination),_=P.fetchPropertyColumns();return s.value=_,$(c.pagination,g)};return O(()=>{a.value.requestServerInteraction()}),{propertyRef:a,loading:o,pagination:d,columns:s,rows:e,onRequest:R,selected:i,fetchPagination:L,handlePostKeywords:M,searchKeyword:f,getSelectedString(){return i.value.length===0?"":`${i.value.length} record${i.value.length>1?"s":""} selected of ${e.value.length}`}}}},_e={class:"q-py-md"},he=["for"],ge=["innerHTML"];function ve(a,e,s,o,d,i){const r=V("TableStatus"),f=V("TableMobileResponsive");return p(),b("div",_e,[t(z,{flat:"",ref:"propertyRef",bordered:"",grid:a.$q.screen.lt.md,rows:o.rows,columns:o.columns,pagination:o.pagination,"onUpdate:pagination":e[4]||(e[4]=l=>o.pagination=l),selected:o.selected,"onUpdate:selected":e[5]||(e[5]=l=>o.selected=l),loading:o.loading,"binary-state-sort":"",onRequest:o.onRequest,"selected-rows-label":o.getSelectedString,selection:"multiple","row-key":"name",class:"property-table","wrap-cells":""},{"top-right":n(()=>[t(H,{borderless:"",dense:"",debounce:"300",modelValue:o.searchKeyword,"onUpdate:modelValue":e[2]||(e[2]=l=>o.searchKeyword=l),placeholder:"Search",class:"border px-4 rounded-lg",onKeyup:e[3]||(e[3]=W(l=>o.handlePostKeywords(o.searchKeyword),["enter"]))},{append:n(()=>[o.searchKeyword!==""?(p(),E(v,{key:0,name:"close",onClick:e[0]||(e[0]=l=>o.searchKeyword=""),class:"cursor-pointer"})):Z("",!0),t(v,{name:"search",onClick:e[1]||(e[1]=l=>o.handlePostKeywords(o.searchKeyword)),class:"cursor-pointer"})]),_:1},8,["modelValue"])]),"header-cell":n(l=>[t(N,{props:l,style:{"text-wrap":"nowrap"}},{default:n(()=>[y("label",{for:l.col.label,class:"font-bold text-sm"},D(l.col.label),9,he)]),_:2},1032,["props"])]),"body-cell-short_description":n(l=>[t(q,{props:l},{default:n(()=>[y("div",{class:"break-all",innerHTML:l.value},null,8,ge)]),_:2},1032,["props"])]),"body-cell-action":n(l=>[t(q,{props:l},{default:n(()=>[t(r,{data:l},null,8,["data"])]),_:2},1032,["props"])]),item:n(l=>[t(f,{props:l},null,8,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"])])}const we=Q(ye,[["render",ve]]),Se={components:{TableList:we}},Pe={class:"row q-gutter-y-sm justify-between"},ke=y("div",{class:"col col-auto text-2xl"},"Property List",-1),Te={class:"col col-auto text-right"};function Qe(a,e,s,o,d,i){const r=V("TableList");return p(),b(B,null,[y("div",Pe,[ke,y("div",Te,[t(T,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),t(r)],64)}const Oe=Q(Se,[["render",Qe]]);export{Oe as default};
