import{L as D,M as x,a9 as L,e as o}from"./ckeditor-f906adf3.js";import{S as u}from"./auth-8ea048e2.js";const l="/api/property/",T=D("property_admin",{state:()=>({post_table_admin:null,router:x(),route:L()}),actions:{async fetchPropertyList(e,t=null,r=null){const s={headers:{Authorization:`Bearer ${e}`}};try{const a="?page="+t;return(await o.get(l+"list"+a,{params:r,...s})).data.data}catch(a){throw console.error("Error:",a),a}},async findProperty(e,t){const r={headers:{Authorization:`Bearer ${e}`}};try{return(await o.get(l+"show/"+t,{...r})).data.data}catch(s){throw console.error("Error:",s),s}},async createProperty(e,t=null,r=null){var c,d,p,f,g,y,m,b,_,P;const s={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},a=((c=this.route.query)==null?void 0:c.type)||null,h=((d=this.route.query)==null?void 0:d.id)||null,S=l+"store",w=l+"update/"+h,C=a==="update"?w:S;t={...t,type_id:t.property_types.id,state_id:t.state.id,status:t.status.slug,file:t.images,listing_type:t.listing_type.slug,id:h},t.property_details>0&&(t=this.handlePropertyDetails(t));const{state:v,property_types:B,images:H,...A}=t;try{const n=await o.post(C,A,s);return this.router.push("/"),u.fire({text:a==="update"?"Property Update Successfully":"Property Create Successfully",icon:"success"}).then(i=>{if(i.isConfirmed)return n.data.data}),n}catch(n){const i=(f=(p=n.response)==null?void 0:p.data)==null?void 0:f.errors;return r.value={...r.value,name:((g=i==null?void 0:i.name)==null?void 0:g[0])??"",description:((y=i==null?void 0:i.description)==null?void 0:y[0])??"",short_description:((m=i==null?void 0:i.short_description)==null?void 0:m[0])??"",state_id:((b=i==null?void 0:i.state_id)==null?void 0:b[0])??"",type_id:((_=i==null?void 0:i.type_id)==null?void 0:_[0])??"",module_path:((P=i==null?void 0:i.module_path)==null?void 0:P[0])??""},n.response}},async deleteProperty(e,t=null){try{const r={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},s=await o.delete(l+"delete/"+t,r);return u.fire({text:"Property Deleted Successfully",icon:"success"}).then(a=>{a.isConfirmed&&this.router.go(0)}),s}catch{}},handlePropertyDetails(e){const t={furnishing:e.furnishing.slug,tenure:e.tenure.slug,bathroom:parseInt(e.bathroom),bedroom:parseInt(e.bedroom)};return e={...e,...t},e},filteredPropertyDetails(e){let t=e.type.filter(r=>e.category==="propertyType"?r.label.toLowerCase()===e.details.toLowerCase():r.slug===e.details.toLowerCase());return t.length>0&&(t={...t}[0]),t},handleFilteredPropertyDetails(e,t,r=null){return this.filteredPropertyDetails({type:e,details:t,category:r})},handleEditProperty(e){this.router.push({name:"property.form",query:{type:"update",id:e}})},handleViewProperty(e){this.router.push({name:"property.detail",params:{id:e}})},async handleDeleteProperty(e,t){return await T().deleteProperty(t,e)},handleHighlights(e,t){e.highlight=e.checked;const r=t,s=r.findIndex(a=>e.id===a.id);return s!==-1?r[s].highlight=e.highlight:r.push({...e,highlight:e.checked}),r},async submitHighlight(e,t){try{const r={headers:{Authorization:`Bearer ${t}`}};await o.post(l+"highlight",e,r),u.fire({text:"Submit Highlight Successfully",icon:"success"}).then(s=>{s.isConfirmed&&this.router.go(0)})}catch(r){u.fire({text:r.response.data.data,icon:"error"})}}}}),F=D("property_admin_models",{state:()=>({post_table_admin:null}),actions:{fetchPropertyColumns(){return[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"short_description",align:"left",label:"Short Description",field:"short_description",sortable:!0},{name:"price",align:"left",label:"Price",field:"price",sortable:!0},{name:"listing_type",align:"left",label:"Listing Type",field:"listing_type",sortable:!0},{name:"created_by",align:"left",label:"Created By",field:"created_by",sortable:!1},{name:"status",align:"left",label:"Status",field:"status",sortable:!1},{name:"created_at",align:"left",label:"Created At",field:"created_at",sortable:!1},{name:"highlight",align:"left",label:"Highlight",field:"highlight",sortable:!1},{name:"action",align:"center",label:"Action",field:"action",sortable:!1}]},fetchPropertyData(){return{name:"",description:"",short_description:"",images:[],status:"",price:300,state:"",property_types:""}},fetchPropertyDetailsData(){return{tenure:"",square_feet:0,furnishing:"",bathroom:1,bedroom:1,car_park:1}},fetchPropertyError(){return{name:null,description:null,short_description:null,images:null,status:null,price:null,tenure:null,square_feet:null,listing_type:null,furnishing:null,bathroom:null,bedroom:null,module_path:null}},fetchTenureData(){return[{label:"Freehold",slug:"freehold"},{label:"Leasehold",slug:"leasehold"}]},fetchFurnishingData(){return[{label:"Unfurnished",slug:"unfurnished"},{label:"Partially Furnished",slug:"partially_furnished"},{label:"Furnished",slug:"furnished"}]},fetchListingTypeData(){return[{label:"Sale",slug:"sale"},{label:"Rent",slug:"rent"}]},fetchStatusData(){return[{label:"Active",slug:"active"},{label:"Inactive",slug:"inactive"}]}}});export{F as a,T as u};
