import{Q as P}from"./focus-manager-79df5594.js";import{Q as M,a as I,b as N}from"./QTable-0af2b1eb.js";import{d as z,u as Y,B as T,r as u,n as _,x as w,G as t,s as o,F as E,D as H,q as U,X as g,H as D,A as h,W as j,E as F,o as G,m as x}from"./ckeditor-395087e9.js";import{u as $,a as K}from"./index-b3c7fbfc.js";import{u as A}from"./app-cd973502.js";import{Q as O}from"./QCheckbox-27486e5c.js";import{Q as W}from"./QCardSection-fdab9935.js";import{Q as X}from"./QSeparator-3f6abff9.js";import{Q as v,d as p,c as b}from"./QMenu-630aeaa5.js";import{Q as B,a as J}from"./QBtnDropdown-5c5a3be5.js";import{Q as Z}from"./QCard-125206f2.js";import{Q}from"./Ripple-c8ae3d8c.js";import{d as ee}from"./dayjs.min-d8d1731f.js";import"./QSelect-22bda3a6.js";import"./option-sizes-2eb5697c.js";import"./QChip-398b7338.js";import"./use-prevent-scroll-487996cc.js";import"./use-timeout-7eeb77f4.js";import"./rtl-36dd996b.js";import"./QLinearProgress-3da15546.js";import"./use-checkbox-41ac9346.js";const te=z("server_table_admin",{state:()=>({post_table_admin:null,router:Y()}),actions:{fetchPaginationData(l,e){const{page:i,rowsPerPage:n,sortBy:d,descending:s}=l;return e={...e,attribute:d,sortable:s?"desc":"asc",page:i,paginate:n},e.paginate<=0&&(e.paginate=l.rowsNumber),e},fetchServerPagination(l,e){return{rowsNumber:l.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(l,e){return{...l,rowsPerPage:e.meta.per_page}},async fetchTableListData(l,e,i,n,d){const a=A().fetchSessionToken(),{page:m}=l??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await i[n](a,m,d)}}});const oe={props:["props"],setup(l){var r;const e=$(),n=A().fetchSessionToken(),d=((r=l.props.row)==null?void 0:r.id)||null,s=u([]);return{handleEdit:()=>{e.handleEditProperty(d)},handleDelete:async()=>{await e.handleDeleteProperty(d,n)},selected:s,getSelectedString(){return console.log(s.value),s.value.length===0?"":`${s.value.length} record${s.value.length>1?"s":""}`}}}},ne={class:"q-gutter-md"};function ae(l,e,i,n,d,s){return _(),w("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:F(i.props.selected?"transform: scale(0.95);":"")},[t(Z,{bordered:"",flat:"",class:j(i.props.selected?l.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:o(()=>[t(B,null,{default:o(()=>[t(W,null,{default:o(()=>[t(O,{dense:"",modelValue:i.props.selected,"onUpdate:modelValue":e[0]||(e[0]=a=>i.props.selected=a),label:i.props.row.name},null,8,["modelValue","label"])]),_:1}),t(X),(_(!0),w(E,null,H(i.props.cols.filter(a=>a.name!=="action"),a=>(_(),U(v,{key:a.name},{default:o(()=>[t(p,null,{default:o(()=>[t(b,null,{default:o(()=>[g(D(a.label),1)]),_:2},1024),t(b,{caption:""},{default:o(()=>[g(D(a.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(v,null,{default:o(()=>[t(p,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Action")]),_:1}),h("div",ne,[t(P,{color:"primary",icon:"visibility",label:"View",size:"sm"}),t(P,{color:"secondary",icon:"edit",label:"Edit",size:"sm",onClick:e[1]||(e[1]=a=>n.handleEdit())}),t(P,{color:"red",icon:"delete",label:"Delete",size:"sm",onClick:e[2]||(e[2]=a=>n.handleDelete())})])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],4)}const le=T(oe,[["render",ae]]),re={props:{data:Object},setup(l){var r;const e=$(),n=A().fetchSessionToken(),d=((r=l.data.row)==null?void 0:r.id)||null;return{handleEdit:()=>{e.handleEditProperty(d,l)},handleDelete:async()=>{await e.handleDeleteProperty(d,n)},handleView:()=>{e.handleViewProperty(d,l)}}}},se=h("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function ie(l,e,i,n,d,s){return _(),w("div",null,[t(J,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:o(()=>[se]),default:o(()=>[t(B,{class:"q-table-edit-dropdown-list"},{default:o(()=>[t(v,{clickable:"",onClick:e[0]||(e[0]=a=>n.handleView())},{default:o(()=>[t(p,null,{default:o(()=>[t(Q,{name:"visibility"})]),_:1}),t(p,null,{default:o(()=>[t(b,null,{default:o(()=>[g("View")]),_:1})]),_:1})]),_:1}),t(v,{clickable:"",onClick:e[1]||(e[1]=a=>n.handleEdit())},{default:o(()=>[t(p,null,{default:o(()=>[t(Q,{name:"edit"})]),_:1}),t(p,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Edit")]),_:1})]),_:1})]),_:1}),t(v,{clickable:"",onClick:e[2]||(e[2]=a=>n.handleDelete())},{default:o(()=>[t(p,null,{default:o(()=>[t(Q,{name:"delete"})]),_:1}),t(p,null,{default:o(()=>[t(b,null,{default:o(()=>[g("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const de=T(re,[["render",ie]]),ce={components:{TableStatus:de,TableMobileResponsive:le},setup(){const l=u(),e=u([]),i=u([]),n=u(!1),d=u({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),s=u([]),a=u({}),m=$(),r=K(),S=te(),q=c=>S.fetchPaginationData(c,a.value),L=c=>{a.value={...a.value,keyword:c,searchable:[],page:1,attribute:"name",sortable:"asc",paginate:15},C(null,a.value)},C=async(c,y)=>{const f=await S.fetchTableListData(c,n,m,"fetchPropertyList",y),R=f.data.map(k=>({...k,created_by:k.user.name,created_at:ee(k.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=R,d.value=S.fetchServerPagination(f,c),y=S.fetchServerPayload(y,f),n.value=!1,f},V=async c=>{const y=q(c.pagination),f=r.fetchPropertyColumns();return i.value=f,C(c.pagination,y)};return G(()=>{l.value.requestServerInteraction()}),{propertyRef:l,loading:n,pagination:d,columns:i,rows:e,onRequest:V,selected:s,fetchPagination:q,handlePostKeywords:L,getSelectedString(){return console.log(s.value),s.value.length===0?"":`${s.value.length} record${s.value.length>1?"s":""} selected of ${e.value.length}`}}}},ue={class:"q-py-md"},pe=["for"];function me(l,e,i,n,d,s){const a=x("TableStatus"),m=x("TableMobileResponsive");return _(),w("div",ue,[t(N,{flat:"",ref:"propertyRef",bordered:"",grid:l.$q.screen.lt.sm,rows:n.rows,columns:n.columns,pagination:n.pagination,"onUpdate:pagination":e[0]||(e[0]=r=>n.pagination=r),selected:n.selected,"onUpdate:selected":e[1]||(e[1]=r=>n.selected=r),loading:n.loading,"binary-state-sort":"",onRequest:n.onRequest,"selected-rows-label":n.getSelectedString,selection:"multiple","row-key":"name",class:"property-table","wrap-cells":""},{"header-cell":o(r=>[t(M,{props:r},{default:o(()=>[h("label",{for:r.col.label,class:"font-bold text-sm"},D(r.col.label),9,pe)]),_:2},1032,["props"])]),"body-cell-action":o(r=>[t(I,{props:r},{default:o(()=>[t(a,{data:r},null,8,["data"])]),_:2},1032,["props"])]),item:o(r=>[t(m,{props:r},null,8,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"])])}const fe=T(ce,[["render",me]]),_e={components:{TableList:fe}},ge={class:"row"},be=h("div",{class:"col text-2xl"},"Property List",-1),he={class:"col text-right"};function ye(l,e,i,n,d,s){const a=x("TableList");return _(),w(E,null,[h("div",ge,[be,h("div",he,[t(P,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),t(a)],64)}const ze=T(_e,[["render",ye]]);export{ze as default};
