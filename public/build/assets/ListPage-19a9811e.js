import{Q as w}from"./QBtn-f04e0e0c.js";import{Q as S}from"./vm-bbb8e40e.js";import{Q as j}from"./QInput-f7a2bc74.js";import{Q as F,a as C,c as G}from"./QTable-5b10b1da.js";import{Q as M}from"./QCheckbox-3a5452c5.js";import{d as O,u as W,B as Q,r as u,n as m,x as g,D as t,s as n,H,T as Z,q as D,F as k,G as A,A as b,W as J,Y as X,o as ee,m as L,U as K,Z as te}from"./ckeditor-fbb897ca.js";import{u as q,a as oe}from"./index-62f00a99.js";import{u as $}from"./app-6f0f1cba.js";import{Q as ne}from"./QCardSection-3d6490d7.js";import{Q as R,b as le,a as ae}from"./QSeparator-1edaee61.js";import{Q as P,a as p,b as _}from"./QMenu-28ee5d15.js";import{Q as re}from"./QCard-5f529700.js";import{d as se}from"./dayjs.min-d9fb95f9.js";import"./QSelect-18a9aa9d.js";import"./QChip-98d3f8a9.js";import"./QDialog-f560fde2.js";import"./use-prevent-scroll-9b8a751e.js";import"./use-tick-27af0da6.js";import"./rtl-36dd996b.js";import"./format-7985d814.js";import"./use-checkbox-eac31a74.js";import"./option-sizes-51933346.js";const ie=O("server_table_admin",{state:()=>({post_table_admin:null,router:W()}),actions:{fetchPaginationData(r,e){const{page:s,rowsPerPage:o,sortBy:i,descending:d}=r;return e={...e,attribute:i,sortable:d?"desc":"asc",page:s,paginate:o},e.paginate<=0&&(e.paginate=r.rowsNumber),e},fetchServerPagination(r,e){return{rowsNumber:r.meta.total,page:e.page,rowsPerPage:e.rowsPerPage,sortBy:e.sortBy,descending:e.descending}},fetchServerPayload(r,e){return{...r,rowsPerPage:e.meta.per_page}},async fetchTableListData(r,e,s,o,i){const a=$().fetchSessionToken(),{page:h}=r??{page:1,rowsPerPage:15,sortBy:null,descending:null};return e.value=!0,await s[o](a,h,i)}}});const de={props:["props"],setup(r){var f;const e=q(),o=$().fetchSessionToken(),i=((f=r.props.row)==null?void 0:f.id)||null,d=u([]);return{handleView:()=>{e.handleViewProperty(i,r.props)},handleEdit:()=>{e.handleEditProperty(i)},handleDelete:async()=>{await e.handleDeleteProperty(i,o)},selected:d,getSelectedString(){return console.log(d.value),d.value.length===0?"":`${d.value.length} record${d.value.length>1?"s":""}`}}}},ce=["innerHTML"],ue={key:1},me={class:"q-gutter-md"};function pe(r,e,s,o,i,d){return m(),g("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:X(s.props.selected?"transform: scale(0.95);":"")},[t(re,{bordered:"",flat:"",class:J(s.props.selected?r.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:n(()=>[t(R,null,{default:n(()=>[t(ne,null,{default:n(()=>[t(M,{dense:"",modelValue:s.props.selected,"onUpdate:modelValue":e[0]||(e[0]=a=>s.props.selected=a),label:s.props.row.name},null,8,["modelValue","label"])]),_:1}),t(le),(m(!0),g(H,null,Z(s.props.cols.filter(a=>a.name!=="action"),a=>(m(),D(P,{key:a.name},{default:n(()=>[t(p,null,{default:n(()=>[t(_,null,{default:n(()=>[k(A(a.label),1)]),_:2},1024),t(_,{caption:""},{default:n(()=>[a.name=="short_description"?(m(),g("div",{key:0,innerHTML:a.value,class:"break-all"},null,8,ce)):(m(),g("div",ue,A(a.value),1))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(P,null,{default:n(()=>[t(p,null,{default:n(()=>[t(_,null,{default:n(()=>[k("Action")]),_:1}),b("div",me,[t(w,{color:"primary",icon:"visibility",label:"View",size:"sm",onClick:e[1]||(e[1]=a=>o.handleView())}),t(w,{color:"secondary",icon:"edit",label:"Edit",size:"sm",onClick:e[2]||(e[2]=a=>o.handleEdit())}),t(w,{color:"red",icon:"delete",label:"Delete",size:"sm",onClick:e[3]||(e[3]=a=>o.handleDelete())})])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],4)}const he=Q(de,[["render",pe]]),fe={props:{data:Object},setup(r){var l;const e=q(),o=$().fetchSessionToken(),i=((l=r.data.row)==null?void 0:l.id)||null;return{handleEdit:()=>{e.handleEditProperty(i,r)},handleDelete:async()=>{await e.handleDeleteProperty(i,o)},handleView:()=>{e.handleViewProperty(i,r)}}}},ge=b("div",{class:"row items-center no-wrap font-bold"},"Edit",-1);function be(r,e,s,o,i,d){return m(),g("div",null,[t(ae,{color:"transparent",class:"text-black font-bold","dropdown-icon":"expand_more"},{label:n(()=>[ge]),default:n(()=>[t(R,{class:"q-table-edit-dropdown-list"},{default:n(()=>[t(P,{clickable:"",onClick:e[0]||(e[0]=a=>o.handleView())},{default:n(()=>[t(p,null,{default:n(()=>[t(S,{name:"visibility"})]),_:1}),t(p,null,{default:n(()=>[t(_,null,{default:n(()=>[k("View")]),_:1})]),_:1})]),_:1}),t(P,{clickable:"",onClick:e[1]||(e[1]=a=>o.handleEdit())},{default:n(()=>[t(p,null,{default:n(()=>[t(S,{name:"edit"})]),_:1}),t(p,null,{default:n(()=>[t(_,null,{default:n(()=>[k("Edit")]),_:1})]),_:1})]),_:1}),t(P,{clickable:"",onClick:e[2]||(e[2]=a=>o.handleDelete())},{default:n(()=>[t(p,null,{default:n(()=>[t(S,{name:"delete"})]),_:1}),t(p,null,{default:n(()=>[t(_,null,{default:n(()=>[k("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const ye=Q(fe,[["render",be]]),_e={components:{TableStatus:ye,TableMobileResponsive:he},setup(){const r=u(),e=u([]),s=u([]),o=u(!1),i=u({sortBy:"name",descending:!1,page:1,rowsPerPage:15,rowsNumber:null}),d=u([]),a=u({}),h=u(""),l=q(),f=oe(),T=ie(),V=u([]),I=c=>{c.highlight=!!c.checked,c.checked?V.value.push(c):V.value.shift()},N=c=>{console.log(c)},B=c=>T.fetchPaginationData(c,a.value),U=c=>{a.value={...a.value,keyword:c,searchable:["name","short_description","price","listing_type"],page:1,attribute:"name",sortable:"asc",paginate:15},E(null,a.value)},E=async(c,v)=>{const y=await T.fetchTableListData(c,o,l,"fetchPropertyList",v),Y=y.data.map(x=>({...x,created_by:x.user.name,created_at:se(x.created_at).format("YYYY-MM-DD HH:mm:ss")}));return e.value=Y,c!=null&&(i.value=T.fetchServerPagination(y,c)),v=T.fetchServerPayload(v,y),o.value=!1,y},z=async c=>{const v=B(c.pagination),y=f.fetchPropertyColumns();return s.value=y,E(c.pagination,v)};return ee(()=>{r.value.requestServerInteraction()}),{propertyRef:r,loading:o,pagination:i,columns:s,rows:e,onRequest:z,selected:d,fetchPagination:B,handlePostKeywords:U,searchKeyword:h,handleHighlight:I,submitHighlight:N,highlight:V,getSelectedString(){return d.value.length===0?"":`${d.value.length} record${d.value.length>1?"s":""} selected of ${e.value.length}`}}}},ve={class:"q-py-md"},we=["for"],Se=["innerHTML"];function ke(r,e,s,o,i,d){const a=L("TableStatus"),h=L("TableMobileResponsive");return m(),g("div",ve,[t(G,{flat:"",ref:"propertyRef",bordered:"",grid:r.$q.screen.lt.md,rows:o.rows,columns:o.columns,pagination:o.pagination,"onUpdate:pagination":e[5]||(e[5]=l=>o.pagination=l),selected:o.selected,"onUpdate:selected":e[6]||(e[6]=l=>o.selected=l),loading:o.loading,"binary-state-sort":"",onRequest:o.onRequest,"selected-rows-label":o.getSelectedString,selection:"multiple","row-key":"name",class:"property-table","wrap-cells":""},{"top-right":n(()=>[o.highlight.length>0?(m(),D(w,{key:0,color:"primary",icon:"star",class:"mr-4",onClick:e[0]||(e[0]=l=>o.submitHighlight(o.highlight))})):K("",!0),t(j,{borderless:"",dense:"",debounce:"300",modelValue:o.searchKeyword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.searchKeyword=l),placeholder:"Search",class:"border px-4 rounded-lg",onKeyup:e[4]||(e[4]=te(l=>o.handlePostKeywords(o.searchKeyword),["enter"]))},{append:n(()=>[o.searchKeyword!==""?(m(),D(S,{key:0,name:"close",onClick:e[1]||(e[1]=l=>o.searchKeyword=""),class:"cursor-pointer"})):K("",!0),t(S,{name:"search",onClick:e[2]||(e[2]=l=>o.handlePostKeywords(o.searchKeyword)),class:"cursor-pointer"})]),_:1},8,["modelValue"])]),"header-cell":n(l=>[t(F,{props:l,style:{"text-wrap":"nowrap"}},{default:n(()=>[b("label",{for:l.col.label,class:"font-bold text-sm"},A(l.col.label),9,we)]),_:2},1032,["props"])]),"body-cell-short_description":n(l=>[t(C,{props:l},{default:n(()=>[b("div",{class:"break-all",innerHTML:l.value},null,8,Se)]),_:2},1032,["props"])]),"body-cell-highlight":n(l=>[t(C,{props:l},{default:n(()=>[t(M,{size:"sm",modelValue:l.row.checked,"onUpdate:modelValue":f=>l.row.checked=f,val:"sm",onClick:f=>o.handleHighlight(l.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1032,["props"])]),"body-cell-action":n(l=>[t(C,{props:l},{default:n(()=>[t(a,{data:l},null,8,["data"])]),_:2},1032,["props"])]),item:n(l=>[t(h,{props:l},null,8,["props"])]),_:1},8,["grid","rows","columns","pagination","selected","loading","onRequest","selected-rows-label"])])}const Pe=Q(_e,[["render",ke]]),Te={components:{TableList:Pe}},Qe={class:"row q-gutter-y-sm justify-between"},Ve=b("div",{class:"col col-auto text-2xl"},"Property List",-1),xe={class:"col col-auto text-right"};function Ce(r,e,s,o,i,d){const a=L("TableList");return m(),g(H,null,[b("div",Qe,[Ve,b("div",xe,[t(w,{"icon-right":"add",label:"Add Property",class:"!font-bold text-white",color:"primary",to:{name:"property.form",query:{type:"create"}}},null,8,["to"])])]),t(a)],64)}const Je=Q(Te,[["render",Ce]]);export{Je as default};
