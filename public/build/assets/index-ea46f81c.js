import{L as D,M as L,a9 as x,e as o}from"./ckeditor-f906adf3.js";import{S as u}from"./auth-8ea048e2.js";const l="/api/property/",T=D("property_admin",{state:()=>({post_table_admin:null,router:L(),route:x()}),actions:{async fetchPropertyList(e,t=null,a=null){const s={headers:{Authorization:`Bearer ${e}`}};try{const i="?page="+t;return(await o.get(l+"list"+i,{params:a,...s})).data.data}catch(i){throw console.error("Error:",i),i}},async findProperty(e,t){const a={headers:{Authorization:`Bearer ${e}`}};try{return(await o.get(l+"show/"+t,{...a})).data.data}catch(s){throw console.error("Error:",s),s}},async createProperty(e,t=null,a=null){var p,d,h,f,y,g,m,b,_,P;const s={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},i=((p=this.route.query)==null?void 0:p.type)||null,c=((d=this.route.query)==null?void 0:d.id)||null,S=l+"store",w=l+"update/"+c,C=i==="update"?w:S;t={...t,type_id:t.property_types.id,state_id:t.state.id,status:t.status.slug,file:t.images,listing_type:t.listing_type.slug,id:c},t.property_details>0&&(t=this.handlePropertyDetails(t));const{state:v,property_types:B,images:q,...A}=t;try{const n=await o.post(C,A,s);return this.router.push("/"),u.fire({text:i==="update"?"Property Update Successfully":"Property Create Successfully",icon:"success"}).then(r=>{if(r.isConfirmed)return n.data.data}),n}catch(n){const r=(f=(h=n.response)==null?void 0:h.data)==null?void 0:f.errors;return a.value={...a.value,name:((y=r==null?void 0:r.name)==null?void 0:y[0])??"",description:((g=r==null?void 0:r.description)==null?void 0:g[0])??"",short_description:((m=r==null?void 0:r.short_description)==null?void 0:m[0])??"",state_id:((b=r==null?void 0:r.state_id)==null?void 0:b[0])??"",type_id:((_=r==null?void 0:r.type_id)==null?void 0:_[0])??"",module_path:((P=r==null?void 0:r.module_path)==null?void 0:P[0])??""},n.response}},async deleteProperty(e,t=null){try{const a={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},s=await o.delete(l+"delete/"+t,a);return u.fire({text:"Property Deleted Successfully",icon:"success"}).then(i=>{i.isConfirmed&&this.router.go(0)}),s}catch{}},handlePropertyDetails(e){const t={furnishing:e.furnishing.slug,tenure:e.tenure.slug,bathroom:parseInt(e.bathroom),bedroom:parseInt(e.bedroom)};return e={...e,...t},e},filteredPropertyDetails(e){let t=e.type.filter(a=>e.category==="propertyType"?a.label.toLowerCase()===e.details.toLowerCase():a.slug===e.details.toLowerCase());return t.length>0&&(t={...t}[0]),t},handleFilteredPropertyDetails(e,t,a=null){return this.filteredPropertyDetails({type:e,details:t,category:a})},handleEditProperty(e){this.router.push({name:"property.form",query:{type:"update",id:e}})},handleViewProperty(e){this.router.push({name:"property.detail",params:{id:e}})},async handleDeleteProperty(e,t){return await T().deleteProperty(t,e)},async submitHighlight(e,t){try{const a={headers:{Authorization:`Bearer ${t}`}};await o.post(l+"highlight",e,a),u.fire({text:"Submit Highlight Successfully",icon:"success"}).then(s=>{s.isConfirmed&&this.router.go(0)})}catch(a){u.fire({text:a.response.data.data,icon:"error"})}}}}),$=D("property_admin_models",{state:()=>({post_table_admin:null}),actions:{fetchPropertyColumns(){return[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"short_description",align:"left",label:"Short Description",field:"short_description",sortable:!0},{name:"price",align:"left",label:"Price",field:"price",sortable:!0},{name:"listing_type",align:"left",label:"Listing Type",field:"listing_type",sortable:!0},{name:"created_by",align:"left",label:"Created By",field:"created_by",sortable:!1},{name:"status",align:"left",label:"Status",field:"status",sortable:!1},{name:"created_at",align:"left",label:"Created At",field:"created_at",sortable:!1},{name:"highlight",align:"left",label:"Highlight",field:"highlight",sortable:!1},{name:"action",align:"center",label:"Action",field:"action",sortable:!1}]},fetchPropertyData(){return{name:"",description:"",short_description:"",images:[],status:"",price:300,state:"",property_types:""}},fetchPropertyDetailsData(){return{tenure:"",square_feet:0,furnishing:"",bathroom:1,bedroom:1,car_park:1}},fetchPropertyError(){return{name:null,description:null,short_description:null,images:null,status:null,price:null,tenure:null,square_feet:null,listing_type:null,furnishing:null,bathroom:null,bedroom:null,module_path:null}},fetchTenureData(){return[{label:"Freehold",slug:"freehold"},{label:"Leasehold",slug:"leasehold"}]},fetchFurnishingData(){return[{label:"Unfurnished",slug:"unfurnished"},{label:"Partially Furnished",slug:"partially_furnished"},{label:"Furnished",slug:"furnished"}]},fetchListingTypeData(){return[{label:"Sale",slug:"sale"},{label:"Rent",slug:"rent"}]},fetchStatusData(){return[{label:"Active",slug:"active"},{label:"Inactive",slug:"inactive"}]}}});export{$ as a,T as u};
