import{d as c,u,a as o}from"./ckeditor-a0aa7a69.js";import{S as n}from"./app-646a8f5b.js";const l="/api/post/",p=c("post_table_admin",{state:()=>({post_table_admin:null,router:u()}),actions:{async fetchPostList(s,t=null,a=null){const r={headers:{Authorization:`Bearer ${s}`}};try{const e="?page="+t;return(await o.get(l+"list"+e,{params:a,...r})).data.data}catch(e){throw console.error("Error:",e),e}},async createPost(s,t=null){const a={headers:{Authorization:`Bearer ${s}`}};try{const r=await o.post(l+"store",t,a);this.router.push("/"),n.fire({text:"Post Created Successfully",icon:"success"}).then(e=>{if(e.isConfirmed)return r.data.data})}catch(r){return r.response}},deletePost(s,t=null){const a={headers:{Authorization:`Bearer ${s}`}};try{n.fire({title:"Do you want to delete this post?",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(r=>{r.isConfirmed&&(o.delete(l+"delete/"+t,a),n.fire("Deleted","","success").then(e=>{e.isConfirmed&&this.router.go("/posts")}))})}catch(r){return r.response}},fetchPostColumns(){return[{name:"title",align:"left",label:"Title",field:"title",sortable:!0},{name:"popularity",align:"left",label:"Popularity",field:"popularity",sortable:!0},{name:"created_at",align:"left",label:"Created At",field:"created_at",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!1}]},handleTableHeaderFunction(s){let t=s.target,a=t.classList;a.contains("sortable")||(t=t.parentNode,a=t.classList);let e=t.querySelector("label");e&&(e=e.innerHTML.replace(/\s+/g,"_").toLowerCase());const i=a.contains("sort-desc")?"desc":"asc";return{attribute:e,sortable:i}}}});export{p as u};
