import{d as P,u as A,ao as v,a as o}from"./ckeditor-6f66a585.js";import{S as _}from"./app-3c9b8a54.js";const l="/api/property/",z=P("property_admin",{state:()=>({post_table_admin:null,router:A(),route:v()}),actions:{async fetchPropertyList(t,e=null,s=null){const n={headers:{Authorization:`Bearer ${t}`}};try{const a="?page="+e;return(await o.get(l+"list"+a,{params:s,...n})).data.data}catch(a){throw console.error("Error:",a),a}},async findProperty(t,e){const s={headers:{Authorization:`Bearer ${t}`}};try{return(await o.get(l+"show/"+e,{...s})).data.data}catch(n){throw console.error("Error:",n),n}},async createProperty(t,e=null,s=null){var c,p,d,h,f,y,g,m,b;const n={headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}},a=((c=this.route.query)==null?void 0:c.type)||null,u=((p=this.route.query)==null?void 0:p.id)||null,D=l+"store",S=l+"update/"+u,w=a==="update"?S:D;e={...e,type_id:e.property_types.id,state_id:e.state.id,status:e.status.slug,file:e.images,id:u},e.property_details>0&&(e=this.handlePropertyDetails(e));const{state:L,property_types:T,images:x,...C}=e;try{const i=await o.post(w,C,n);return this.router.push("/property"),_.fire({text:a==="update"?"Property Update Successfully":"Property Create Successfully",icon:"success"}).then(r=>{if(r.isConfirmed)return i.data.data}),i}catch(i){const r=(h=(d=i.response)==null?void 0:d.data)==null?void 0:h.errors;return s.value={...s.value,name:((f=r==null?void 0:r.name)==null?void 0:f[0])??"",description:((y=r==null?void 0:r.description)==null?void 0:y[0])??"",short_description:((g=r==null?void 0:r.short_description)==null?void 0:g[0])??"",state_id:((m=r==null?void 0:r.state_id)==null?void 0:m[0])??"",type_id:((b=r==null?void 0:r.type_id)==null?void 0:b[0])??""},i.response}},async deleteProperty(t,e=null){try{const s={headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}},n=await o.delete(l+"delete/"+e,s);return _.fire({text:"Property Deleted Successfully",icon:"success"}).then(a=>{a.isConfirmed&&this.router.go(0)}),n}catch{}},handlePropertyDetails(t){const e={furnishing:t.furnishing.slug,listing_type:t.listing_type.slug,tenure:t.tenure.slug,bathroom:parseInt(t.bathroom),bedroom:parseInt(t.bedroom)};return t={...t,...e},t},filteredPropertyDetails(t){let e=t.type.filter(s=>t.category==="propertyType"?s.label.toLowerCase()===t.details.toLowerCase():s.slug===t.details.toLowerCase());return e.length>0&&(e={...e}[0]),e}}}),F=P("property_admin_models",{state:()=>({post_table_admin:null}),actions:{fetchPropertyColumns(){return[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"short_description",align:"left",label:"Short Description",field:"short_description",sortable:!0},{name:"price",align:"left",label:"Price",field:"price",sortable:!0},{name:"created_by",align:"left",label:"Created By",field:"created_by",sortable:!1},{name:"status",align:"center",label:"Status",field:"status",sortable:!1}]},fetchPropertyData(){return{name:"",description:"",short_description:"",images:[],status:"",price:300,state:"",property_types:""}},fetchPropertyDetailsData(){return{tenure:"",square_feet:"",listing_type:"",furnishing:"",bathroom:1,bedroom:1}},fetchPropertyError(){return{name:null,description:null,short_description:null,images:null,status:null,price:null,tenure:null,square_feet:null,listing_type:null,furnishing:null,bathroom:null,bedroom:null}},fetchTenureData(){return[{label:"Freehold",slug:"freehold"},{label:"Leasehold",slug:"leasehold"}]},fetchFurnishingData(){return[{label:"Unfurnished",slug:"unfurnished"},{label:"Partially Furnished",slug:"partially_furnished"},{label:"Furnished",slug:"furnished"}]},fetchListingTypeData(){return[{label:"Sale",slug:"sale"},{label:"Rent",slug:"rent"}]},fetchStatusData(){return[{label:"Active",slug:"active"},{label:"Inactive",slug:"inactive"}]}}});export{F as a,z as u};
