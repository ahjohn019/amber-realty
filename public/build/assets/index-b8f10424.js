import{d as P,u as A,ao as v,a as l}from"./ckeditor-6cef9db6.js";import{S as _}from"./app-eb10355b.js";const o="/api/property/",L=P("property_admin",{state:()=>({post_table_admin:null,router:A(),route:v()}),actions:{async fetchPropertyList(e,t=null,s=null){const a={headers:{Authorization:`Bearer ${e}`}};try{const n="?page="+t;return(await l.get(o+"list"+n,{params:s,...a})).data.data}catch(n){throw console.error("Error:",n),n}},async findProperty(e,t){const s={headers:{Authorization:`Bearer ${e}`}};try{return(await l.get(o+"show/"+t,{...s})).data.data}catch(a){throw console.error("Error:",a),a}},async createProperty(e,t=null,s=null){var c,p,d,h,f,y,g,m,b;const a={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},n=((c=this.route.query)==null?void 0:c.type)||null,u=((p=this.route.query)==null?void 0:p.id)||null,D=o+"store",S=o+"update/"+u,w=n==="update"?S:D;t={...t,type_id:t.property_types.id,state_id:t.state.id,status:t.status.slug,file:t.images,id:u},t.property_details>0&&(t=this.handlePropertyDetails(t));const{state:T,property_types:q,images:x,...C}=t;try{const i=await l.post(w,C,a);return this.router.push("/property"),_.fire({text:n==="update"?"Property Update Successfully":"Property Create Successfully",icon:"success"}).then(r=>{if(r.isConfirmed)return i.data.data}),i}catch(i){const r=(h=(d=i.response)==null?void 0:d.data)==null?void 0:h.errors;return s.value={...s.value,name:((f=r==null?void 0:r.name)==null?void 0:f[0])??"",description:((y=r==null?void 0:r.description)==null?void 0:y[0])??"",short_description:((g=r==null?void 0:r.short_description)==null?void 0:g[0])??"",state_id:((m=r==null?void 0:r.state_id)==null?void 0:m[0])??"",type_id:((b=r==null?void 0:r.type_id)==null?void 0:b[0])??""},i.response}},async deleteProperty(e,t=null){try{const s={headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}},a=await l.delete(o+"delete/"+t,s);return _.fire({text:"Property Deleted Successfully",icon:"success"}).then(n=>{n.isConfirmed&&this.router.go(0)}),a}catch{}},handlePropertyDetails(e){const t={furnishing:e.furnishing.slug,listing_type:e.listing_type.slug,tenure:e.tenure.slug,bathroom:parseInt(e.bathroom),bedroom:parseInt(e.bedroom)};return e={...e,...t},e},filteredPropertyDetails(e){let t=e.type.filter(s=>e.category==="propertyType"?s.label.toLowerCase()===e.details.toLowerCase():s.slug===e.details.toLowerCase());return t.length>0&&(t={...t}[0]),t},handleEditProperty(e){this.router.push({name:"property.form",query:{type:"update",id:e}})},async handleDeleteProperty(e,t){return await L().deleteProperty(t,e)}}}),E=P("property_admin_models",{state:()=>({post_table_admin:null}),actions:{fetchPropertyColumns(){return[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"short_description",align:"left",label:"Short Description",field:"short_description",sortable:!0},{name:"price",align:"left",label:"Price",field:"price",sortable:!0},{name:"created_by",align:"left",label:"Created By",field:"created_by",sortable:!1},{name:"status",align:"center",label:"Status",field:"status",sortable:!1},{name:"created_at",align:"center",label:"Created At",field:"created_at",sortable:!1},{name:"action",align:"center",label:"Action",field:"action",sortable:!1}]},fetchPropertyData(){return{name:"",description:"",short_description:"",images:[],status:"",price:300,state:"",property_types:""}},fetchPropertyDetailsData(){return{tenure:"",square_feet:"",listing_type:"",furnishing:"",bathroom:1,bedroom:1}},fetchPropertyError(){return{name:null,description:null,short_description:null,images:null,status:null,price:null,tenure:null,square_feet:null,listing_type:null,furnishing:null,bathroom:null,bedroom:null}},fetchTenureData(){return[{label:"Freehold",slug:"freehold"},{label:"Leasehold",slug:"leasehold"}]},fetchFurnishingData(){return[{label:"Unfurnished",slug:"unfurnished"},{label:"Partially Furnished",slug:"partially_furnished"},{label:"Furnished",slug:"furnished"}]},fetchListingTypeData(){return[{label:"Sale",slug:"sale"},{label:"Rent",slug:"rent"}]},fetchStatusData(){return[{label:"Active",slug:"active"},{label:"Inactive",slug:"inactive"}]}}});export{E as a,L as u};
